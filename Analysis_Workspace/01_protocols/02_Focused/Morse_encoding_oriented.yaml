version: "1.0"

channels:
  analyze: ["left", "right", "difference"]

preprocessing:
  # pas de normalisation implicite.
  normalize:
    enabled: false
  segmentation:
    enabled: false

visualization:
  enabled: true
  formats: ["png"]
  dpi: 150
  figsize: [12, 8]

output:
  save_raw_data: true
  save_config: true

analyses:
  # 1) TEMPORAL (cœur Morse-like : E + Δ)
  temporal:
    enabled: true
    methods:
      - name: "envelope"
        params:
          method: "hilbert"

      - name: "autocorrelation"
        params:
          max_lag: 5000
          max_samples: 100000
          normalize: true

      # Détection d'événements (E) : on sweep des seuils et min_distance.
      # Objectif : détecter des "on/off" potentiels sans dépendre d’un seul réglage.
      - name: "pulse_detection"
        params:
          threshold: 0.2
          min_distance: 200
      - name: "pulse_detection"
        params:
          threshold: 0.2
          min_distance: 500
      - name: "pulse_detection"
        params:
          threshold: 0.4
          min_distance: 200
      - name: "pulse_detection"
        params:
          threshold: 0.4
          min_distance: 500
      - name: "pulse_detection"
        params:
          threshold: 0.6
          min_distance: 200
      - name: "pulse_detection"
        params:
          threshold: 0.6
          min_distance: 500

      # Durées/ratios (Δ) : indispensable pour "Morse-like"
      - name: "duration_ratios"

  # 2) MODULATION (si Morse porté via AM lente, ou si carrier modulé)
  modulation:
    enabled: true
    methods:
      - name: "am_detection"
      - name: "fm_detection"
      - name: "phase_analysis"
      - name: "modulation_index"
      - name: "chirp_detection"
        params:
          window_size: 2048
          hop_length: 512
          min_duration: 0.1

  # 3) SPECTRAL (si le porteur est fréquentiel / tonal, ou si patterns stéga)
  spectral:
    enabled: true
    methods:
      - name: "fft_global"
        params:
          window: "hann"
      - name: "peak_detection"
        params:
          prominence: 0.1
          distance: 10
      - name: "harmonic_analysis"
        params:
          max_harmonics: 10
      - name: "cepstrum"
      - name: "spectral_centroid"
      - name: "spectral_bandwidth"
      - name: "spectral_rolloff"
        params:
          rolloff_percent: 0.85
      - name: "spectral_flux"
        params:
          window_size: 2048
          hop_length: 512
      - name: "spectral_flatness"

  # 4) TIME-FREQUENCY (patterns TF, stabilité de bandes, etc.)
  time_frequency:
    enabled: true
    methods:
      - name: "stft"
        params:
          window_size: 2048
          hop_length: 512
          window_type: "hann"

      - name: "cqt"
        params:
          fmin: 32.70319566257483
          n_bins: 84
          bins_per_octave: 12
          hop_length: 512
          max_time_frames: 500
          max_samples: 200000

      - name: "wavelet"
        params:
          wavelet: "morlet"
          num_scales: 64

      - name: "band_stability"
        params:
          window_size: 2048
          hop_length: 512
          bands:
            - [20, 100]
            - [100, 500]
            - [500, 2000]
            - [2000, 8000]
            - [8000, 20000]

  # 5) INFORMATION (entropie / compressibilité : utile pour stéga, pas pour "prouver" quoi que ce soit)
  information:
    enabled: true
    methods:
      - name: "shannon_entropy"
      - name: "local_entropy"
        params:
          window_size: 1024
          hop_length: 512
      - name: "compression_ratio"
      - name: "approximate_complexity"
      - name: "mutual_information"
        params:
          num_bins: 64

  # 6) INTER-CHANNEL (si stéga/porteuse répartie entre canaux)
  inter_channel:
    enabled: true
    methods:
      - name: "lr_difference"
      - name: "cross_correlation"
        params:
          max_lag: 5000
      - name: "phase_difference"
      - name: "time_delay"

  # 7) STEGANOGRAPHY (mesures “suspicion structurelle”, pas décodage)
  steganography:
    enabled: true
    methods:
      - name: "lsb_analysis"
      - name: "quantization_noise"
      - name: "signal_residual"
      - name: "statistical_anomalies"
        params:
          z_threshold: 3.0
          num_bins: 100
      - name: "parity_analysis"

  # 8) META-ANALYSIS (stabilité, clustering de segments… utile pour diagnostiquer “sous-contraint”)
  meta_analysis:
    enabled: true
    methods:
      - name: "inter_segment_comparison"
      - name: "segment_clustering"
        params:
          max_k: 6
          seed: 42
      - name: "stability_scores"
      - name: "high_order_statistics"
        params:
          num_bins: 50
